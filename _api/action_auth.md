---
title: /Auth
position: 1.2
type: 
description: Perfrom an Authorization
right_code: |
  ~~~ json
  {
    "result":"success",
    "merchantId":111111,
    "merchantTxId":"abc123",
    "txId":"123",
    "acquirerTxId":"0009312",
    "amount":12.50,
    "currency":"EUR",
    "customerId":"mgn456",
    "action":"AUTH",
    "pan":"45ae201ghy23498FjMj701",
    "brandId":111111000,
    "paymentSolutionId":500,
    "freeText":"Added+10%+discount+on+the+item",
    "language":"en",
    "acquirerAmount":12.50,
    "acquirerCurrency":"EUR",
    "paymentSolutionDetails":
        {
            "authCode":"1234"
        },
    "status":"NOT_SET_FOR_CAPTURE"
  }
  ~~~
  {: title="Response" }

  ~~~ json
  {
    "result": "failure",
    "resultId": "7433a8d6-caea-40e6-a6eb-90c11dad61be",
    "additionalDetails": {},
    "errors": [
    {
    "messageCode": "field.nonempty",
    "fieldName": "action"
  }
  ],
    "processingTime": 2
  }
  ~~~
  {: title="Error" }
---

merchantId 
: Merchant ID that identifies the merchant in the BOIPA Gateway. **Integer (18)**

token 
: Session Token received in the Session Token Request. **String (40)**

customerId 
: Customer identifier provided by merchant, or generated by the Gateway in a previous payment transaction using. **String (20)**<br>
The value is used to validate that the payment card.
<br> Used to validate the payment card token is for the correct customer.<br>
**Condition:** Mandatory, if not received in the Session Token Request

customerIPAddress 
: IP Address of Customer. **String (39)**
<br>**Condition:** Mandatory, if not received in the Session Token Request.

paymentSolutionId 
: Payment solution identifier in the Gateway., e.g. “500”. **Integer (18)**
<br>**Condition:** Mandatory, if not received in the Session Token Request

specinCreditCardCVV 
: Credit card CVV, if payment solution is credit card through the ECOM channel.. **String (5)**
<br>**Condition:** Mandatory, if not received in the Session Token Request.

specinCreditCardToken 
: Free form text field for the merchant’s use that is used for reconciliation. **String (100)**
<br>**Condition:** Mandatory, if not received in the Session Token Request.

{: .success }


Perfrom an AUTH transaction with a Session Token

~~~ php
<pre>
    <?php
    include_once '../../payments.php';
    include_once '../example_data.php';

    use Payments\Payments;

try {
        $payments = (new Payments())->testEnvironment(array(
            "merchantId" => $merchantId,
            "password" => $password,
        ));
        $tokenize = $this->payments->auth();
        $tokenize->allowOriginUrl("http://google.com/")->
         merchantNotificationUrl("http://google.com/")->
         paymentSolutionId("500")->
         channel("ECOM")->
         amount("500.00")->
         country("IE")->
         currency("EUR")->
         specinCreditCardCVV("888")->
         specinCreditCardToken("5512732598811111") ->
         //this must be set properly, otherwise 'General error found during NVP transaction' occurs.
         customerIPAddress("127.0.0.1") ->
         customerId("testTokenize")  ;
         $result = $tokenize->execute();
         var_dump($token);
    } 
	catch (Exception $e) 
	{
        var_dump("Exception");
        var_dump($e->getMessage());
        var_dump($e->getCode());
        var_dump($e->getFile());
        var_dump($e->getLine());
    }
    ?>
</pre>
~~~
{: title="PHP" }
~~~ php

	public void reqParExExpTestCall() {

		try {

			final Map<String, String> inputParams = new HashMap<>();
			inputParams.put("number", "5454545454545454");
			inputParams.put("nameOnCard", "John Doe");
			inputParams.put("expiryMonth", "12");
			inputParams.put("expiryYear", "2025"); 

			final TokenizeCall call = new TokenizeCall(config, inputParams, null);
			call.execute();

		} catch (RequiredParamException e) {

			Assert.assertEquals(new HashSet<>(Arrays.asList("expiryYear")), e.getMissingFields());
			throw e;

		}
	}

	
	
	public void actCallExExpTestCall() {

		final Map<String, String> inputParams = new HashMap<>();
		inputParams.put("number", "5454545454545454");
		inputParams.put("nameOnCard", "John Doe");
		inputParams.put("expiryMonth", "12");
		inputParams.put("expiryYear", "2025"); // past date

		final TokenizeCall call = new TokenizeCall(config, inputParams, null);
		call.execute();
	}
}
~~~
{: title="Java" }
~~~ javascript
import ActionType from './define/ActionType.js';
import BaseApiCall from './BaseApiCall.js';

/**
 * card tokenize for future use
 *

 */
export default class TokenizeCall extends BaseApiCall {
  constructor(inputParams, extraConfig = null) {
    super(inputParams, ActionType.TOKENIZE, extraConfig);
    //initialize the token request
    this.paramsConfig();
  }

  /**
   * init params for token request and action request
   */
  paramsConfig = () => {
    const {merchantId, password, allowOriginUrl, number, nameOnCard, expiryMonth, expiryYear} = this.inputParams;
    this.initTokenParams({
      'merchantId': merchantId,
      'password': password,
      'allowOriginUrl': allowOriginUrl,
      'action': this.actionType,
      'timestamp': Date.now(),
    }, false);
    this.initActionParams({
      'number': number,
      'nameOnCard': nameOnCard,
      'expiryMonth': expiryMonth,
      'expiryYear': expiryYear,
    });
    this.initMandatory([
      'number',
      'nameOnCard',
      'expiryMonth',
      'expiryYear',
    ]);
  };
}

~~~
{: title="Node.js" }